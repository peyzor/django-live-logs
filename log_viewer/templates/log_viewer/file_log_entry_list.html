{% load static i18n %}

<tbody id="log-entries-data" x-data="{ copiedValue: '' }">
{% if log_entries %}
    {% for log_entry in log_entries %}
        <tr class="hover:bg-gray-100">
            <td scope="row" class="border p-2">{{ forloop.counter }}</td>
            <td class="border p-2 relative break-words">
                <div class="flex items-center">
                    <div class="flex-grow min-w-0">
                        {{ log_entry }}
                    </div>
                    <div x-data="{ showMsg: false }">
                        <i @click="copyText($event); showMsg = true; setTimeout(() => showMsg = false, 2000)"
                           class="fa-solid fa-copy copy-icon p-2 focus:outline-none cursor-pointer">
                        </i>
                        <div x-show="showMsg" @click.away="showMsg = false"
                             class="message fixed bottom-3 right-3 z-20 max-w-sm overflow-hidden bg-green-100 border
                                    border-green-300 rounded p-3 flex items-center justify-center text-green-600"
                             style="position: fixed; bottom: 20px; right: 20px; display: none;">
                            {% trans 'Copied to Clipboard' %}
                        </div>
                    </div>
                </div>
            </td>
        </tr>
    {% endfor %}

{% else %}
    <tr class="hover:bg-gray-100">
        <td class="border p-2" colspan="2">{% trans 'No entries!' %}</td>
    </tr>
{% endif %}

</tbody>

<tfoot id="log-entries-footer" hx-swap-oob="true">
<tr>
    <td colspan="2">
        <div class="pagination">
                <span class="step-links">
                    {% if log_entries.has_previous %}
                        <span class="cursor-pointer"
                              hx-get="{% url 'log_viewer:file_log_entries' filename=filename %}?page=1"
                              hx-target="#log-entries-data"
                              hx-swap="outerHTML">
                            &laquo; first
                        </span>
                        <span class="cursor-pointer"
                              hx-get="{% url 'log_viewer:file_log_entries' filename=filename %}?page={{ log_entries.previous_page_number }}"
                              hx-target="#log-entries-data"
                              hx-swap="outerHTML">
                            previous
                        </span>
                    {% endif %}

                    <span class="current"> Page {{ log_entries.number }} of {{ log_entries.paginator.num_pages }}.</span>

                    {% if log_entries.has_next %}
                        <span class="cursor-pointer"
                              hx-get="{% url 'log_viewer:file_log_entries' filename=filename %}?page={{ log_entries.next_page_number }}"
                              hx-target="#log-entries-data"
                              hx-swap="outerHTML">
                            next
                        </span>
                        <span class="cursor-pointer"
                              hx-get="{% url 'log_viewer:file_log_entries' filename=filename %}?page={{ log_entries.paginator.num_pages }}"
                              hx-target="#log-entries-data"
                              hx-swap="outerHTML">
                            last &raquo;
                        </span>
                    {% endif %}
                </span>
        </div>
    </td>
</tr>
</tfoot>